import{c as ne,r as n,j as e,k as Pe,l as $e,m as Ve,n as Me,R as Ge,o as Oe,p as se,P as Fe,q as Be,s as pe,v as Z,w as Ue,B as _,L as fe,C as qe,I as B,X as He,a as U,d as v,x as ze,y as We}from"./index-Og0Cjv7c.js";import{b as z,d as Ke,c as Ye}from"./index-CtgARJQr.js";import{C as N,a as oe,b as de,d as w}from"./card-DKR6wQjg.js";import{B as T}from"./badge-0u9PLDS-.js";import{L}from"./label-D4adTHT0.js";import{A as ue,a as xe,b as me,S as W,c as K,d as Y,e as X,f as p}from"./select-Dr9AkgeC.js";import{T as Xe,a as Ze,b as ae,c as P,d as Je,e as E}from"./table-BZ65fvGu.js";import{T as he,A as Qe}from"./triangle-alert-BALBCSHX.js";import{U as es}from"./user-BczVn2hC.js";import{C as ss}from"./clock-DEnkp12q.js";import{L as je}from"./loader-circle-qKgIXUvm.js";import{S as as}from"./search-C1Z6BGo7.js";import"./index-BdQq_4o_.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ns=ne("arrow-right",ts);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],ls=ne("chevron-left",rs);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],cs=ne("external-link",is);function os(s){const a=ds(s),i=n.forwardRef((l,c)=>{const{children:d,...o}=l,u=n.Children.toArray(d),x=u.find(xs);if(x){const g=x.props.children,m=u.map(h=>h===x?n.Children.count(g)>1?n.Children.only(null):n.isValidElement(g)?g.props.children:null:h);return e.jsx(a,{...o,ref:c,children:n.isValidElement(g)?n.cloneElement(g,void 0,m):null})}return e.jsx(a,{...o,ref:c,children:d})});return i.displayName=`${s}.Slot`,i}function ds(s){const a=n.forwardRef((i,l)=>{const{children:c,...d}=i;if(n.isValidElement(c)){const o=hs(c),u=ms(d,c.props);return c.type!==n.Fragment&&(u.ref=l?Pe(l,o):o),n.cloneElement(c,u)}return n.Children.count(c)>1?n.Children.only(null):null});return a.displayName=`${s}.SlotClone`,a}var us=Symbol("radix.slottable");function xs(s){return n.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===us}function ms(s,a){const i={...a};for(const l in a){const c=s[l],d=a[l];/^on[A-Z]/.test(l)?c&&d?i[l]=(...u)=>{const x=d(...u);return c(...u),x}:c&&(i[l]=c):l==="style"?i[l]={...c,...d}:l==="className"&&(i[l]=[c,d].filter(Boolean).join(" "))}return{...s,...i}}function hs(s){var l,c;let a=(l=Object.getOwnPropertyDescriptor(s.props,"ref"))==null?void 0:l.get,i=a&&"isReactWarning"in a&&a.isReactWarning;return i?s.ref:(a=(c=Object.getOwnPropertyDescriptor(s,"ref"))==null?void 0:c.get,i=a&&"isReactWarning"in a&&a.isReactWarning,i?s.props.ref:s.props.ref||s.ref)}var gs=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],J=gs.reduce((s,a)=>{const i=os(`Primitive.${a}`),l=n.forwardRef((c,d)=>{const{asChild:o,...u}=c,x=o?i:a;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(x,{...u,ref:d})});return l.displayName=`Primitive.${a}`,{...s,[a]:l}},{}),Q="Tabs",[ps]=Be(Q,[pe]),ve=pe(),[fs,re]=ps(Q),Ne=n.forwardRef((s,a)=>{const{__scopeTabs:i,value:l,onValueChange:c,defaultValue:d,orientation:o="horizontal",dir:u,activationMode:x="automatic",...g}=s,m=$e(u),[h,f]=Ve({prop:l,onChange:c,defaultProp:d??"",caller:Q});return e.jsx(fs,{scope:i,baseId:Me(),value:h,onValueChange:f,orientation:o,dir:m,activationMode:x,children:e.jsx(J.div,{dir:m,"data-orientation":o,...g,ref:a})})});Ne.displayName=Q;var be="TabsList",ye=n.forwardRef((s,a)=>{const{__scopeTabs:i,loop:l=!0,...c}=s,d=re(be,i),o=ve(i);return e.jsx(Ge,{asChild:!0,...o,orientation:d.orientation,dir:d.dir,loop:l,children:e.jsx(J.div,{role:"tablist","aria-orientation":d.orientation,...c,ref:a})})});ye.displayName=be;var we="TabsTrigger",Se=n.forwardRef((s,a)=>{const{__scopeTabs:i,value:l,disabled:c=!1,...d}=s,o=re(we,i),u=ve(i),x=Te(o.baseId,l),g=Ae(o.baseId,l),m=l===o.value;return e.jsx(Oe,{asChild:!0,...u,focusable:!c,active:m,children:e.jsx(J.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":g,"data-state":m?"active":"inactive","data-disabled":c?"":void 0,disabled:c,id:x,...d,ref:a,onMouseDown:se(s.onMouseDown,h=>{!c&&h.button===0&&h.ctrlKey===!1?o.onValueChange(l):h.preventDefault()}),onKeyDown:se(s.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(l)}),onFocus:se(s.onFocus,()=>{const h=o.activationMode!=="manual";!m&&!c&&h&&o.onValueChange(l)})})})});Se.displayName=we;var Ce="TabsContent",_e=n.forwardRef((s,a)=>{const{__scopeTabs:i,value:l,forceMount:c,children:d,...o}=s,u=re(Ce,i),x=Te(u.baseId,l),g=Ae(u.baseId,l),m=l===u.value,h=n.useRef(m);return n.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),e.jsx(Fe,{present:c||m,children:({present:f})=>e.jsx(J.div,{"data-state":m?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":x,hidden:!f,id:g,tabIndex:0,...o,ref:a,style:{...s.style,animationDuration:h.current?"0s":void 0},children:f&&d})})});_e.displayName=Ce;function Te(s,a){return`${s}-trigger-${a}`}function Ae(s,a){return`${s}-content-${a}`}var js=Ne,Ee=ye,Re=Se,Ie=_e;const vs=js,ke=n.forwardRef(({className:s,...a},i)=>e.jsx(Ee,{ref:i,className:Z("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",s),...a}));ke.displayName=Ee.displayName;const q=n.forwardRef(({className:s,...a},i)=>e.jsx(Re,{ref:i,className:Z("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",s),...a}));q.displayName=Re.displayName;const H=n.forwardRef(({className:s,...a},i)=>e.jsx(Ie,{ref:i,className:Z("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...a}));H.displayName=Ie.displayName;const De=n.forwardRef(({className:s,...a},i)=>e.jsx("textarea",{className:Z("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:i,...a}));De.displayName="Textarea";const te=["REGISTERED","IDENTITY_VERIFIED","BGC_PENDING","BGC_CLEAR","BGC_CONSIDER","ACTIVE","DEACTIVATED"],ge={bgc:"bg-purple-100 text-purple-700",account:"bg-blue-100 text-blue-700",earnings:"bg-emerald-100 text-emerald-700",operational:"bg-dd-200 text-dd-700",warning:"bg-dd-red-light text-dd-red",unknown:"bg-yellow-100 text-yellow-700"},Ns={critical:"text-red-600 font-bold",high:"text-orange-600 font-semibold",medium:"text-yellow-600 font-medium",low:"text-dd-600",info:"text-blue-500"};function bs(){return e.jsxs("div",{className:"p-6 lg:p-8 max-w-5xl mx-auto space-y-6",children:[e.jsx(v,{className:"h-4 w-36"}),e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{className:"h-8 w-64"}),e.jsx(v,{className:"h-4 w-40"})]}),e.jsx(v,{className:"h-6 w-28 rounded-full"})]}),e.jsx(N,{children:e.jsxs(w,{className:"p-6",children:[e.jsx(v,{className:"h-3 w-32 mb-4"}),e.jsx("div",{className:"flex gap-1.5",children:te.map(s=>e.jsx(v,{className:"h-2 flex-1 rounded-full"},s))})]})}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[1,2,3,4].map(s=>e.jsx(N,{children:e.jsxs(w,{className:"p-4 space-y-2",children:[e.jsx(v,{className:"h-3 w-20"}),e.jsx(v,{className:"h-5 w-28"})]})},s))}),e.jsx(v,{className:"h-10 w-72"}),e.jsx(N,{children:e.jsx(w,{className:"p-6 space-y-4",children:[1,2,3].map(s=>e.jsx(v,{className:"h-10 w-full"},s))})})]})}function ys({entry:s}){return e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-primary border-2 border-background shadow"}),e.jsx(ze,{orientation:"vertical",className:"flex-1 my-1"})]}),e.jsx(N,{className:"flex-1 mb-4",children:e.jsxs(w,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.old_stage?e.jsx(T,{className:z[s.old_stage]||"bg-dd-200 text-dd-800",children:s.old_stage.replace(/_/g," ")}):e.jsx("span",{className:"text-xs text-muted-foreground",children:"--"}),e.jsx(ns,{className:"h-3.5 w-3.5 text-muted-foreground"}),e.jsx(T,{className:z[s.new_stage]||"bg-dd-200 text-dd-800",children:s.new_stage.replace(/_/g," ")})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:new Date(s.changed_at).toLocaleString()}),s.trigger_email_subject&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1 truncate",children:["Trigger: ",s.trigger_email_subject]})]})})]})}function ws({accountId:s,email:a}){const[i,l]=n.useState([]),[c,d]=n.useState(!0),[o,u]=n.useState(""),[x,g]=n.useState(""),[m,h]=n.useState(""),[f,$]=n.useState(null),[R,V]=n.useState(""),[S,O]=n.useState(""),[j,I]=n.useState(1),[C,b]=n.useState(0),y=50;n.useEffect(()=>{const r=setTimeout(()=>O(R),300);return()=>clearTimeout(r)},[R]),n.useEffect(()=>{I(1)},[o,x,m,f,S]);async function M(){d(!0);try{const r=new URLSearchParams;o&&r.set("category",o),x&&r.set("urgency",x),m&&r.set("source",m),f!==null&&r.set("action_required",String(f)),S&&r.set("search",S),r.set("page",String(j)),r.set("per_page",String(y));const D=r.toString(),F=await U.get(`/api/analysis/account/${s}?${D}`);l(F.analyses),b(F.total)}catch{l([]),b(0)}finally{d(!1)}}n.useEffect(()=>{M()},[s,o,x,m,f,S,j]);const A=!!(x||m||f!==null||S),k=Math.max(1,Math.ceil(C/y)),G={};for(const r of i)G[r.category]=(G[r.category]||0)+1;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs(_,{variant:o?"outline":"default",size:"sm",onClick:()=>u(""),children:["All ",A?"":`(${C})`]}),Object.entries(G).map(([r,D])=>e.jsxs(T,{className:`cursor-pointer ${ge[r]||"bg-dd-200 text-dd-700"} ${o===r?"ring-2 ring-primary ring-offset-1":""}`,onClick:()=>u(r===o?"":r),children:[r," (",D,")"]},r))]}),e.jsx(N,{children:e.jsxs(w,{className:"p-3 flex items-center gap-3 flex-wrap",children:[e.jsxs(W,{value:x,onValueChange:g,children:[e.jsx(K,{className:"w-[140px] h-8 text-xs",children:e.jsx(Y,{placeholder:"All Urgency"})}),e.jsxs(X,{children:[e.jsx(p,{value:"all",children:"All Urgency"}),e.jsx(p,{value:"critical",children:"Critical"}),e.jsx(p,{value:"high",children:"High"}),e.jsx(p,{value:"medium",children:"Medium"}),e.jsx(p,{value:"low",children:"Low"}),e.jsx(p,{value:"info",children:"Info"})]})]}),e.jsxs(W,{value:m,onValueChange:h,children:[e.jsx(K,{className:"w-[140px] h-8 text-xs",children:e.jsx(Y,{placeholder:"All Sources"})}),e.jsxs(X,{children:[e.jsx(p,{value:"all",children:"All Sources"}),e.jsx(p,{value:"rules",children:"Rules"}),e.jsx(p,{value:"rules_dedup",children:"Rules (Dedup)"}),e.jsx(p,{value:"ai",children:"AI"}),e.jsx(p,{value:"ai_dedup",children:"AI (Dedup)"}),e.jsx(p,{value:"manual",children:"Manual"})]})]}),e.jsxs("label",{className:"inline-flex items-center gap-1.5 text-xs text-muted-foreground cursor-pointer select-none",children:[e.jsx("input",{type:"checkbox",checked:f===!0,onChange:r=>$(r.target.checked?!0:null),className:"rounded border-input text-primary focus:ring-primary"}),"Action Required"]}),e.jsxs("div",{className:"relative flex-1 min-w-[180px]",children:[e.jsx(as,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-muted-foreground"}),e.jsx(B,{value:R,onChange:r=>V(r.target.value),placeholder:"Search summary...",className:"pl-8 h-8 text-xs"})]}),A&&e.jsx(_,{variant:"ghost",size:"sm",onClick:()=>{g(""),h(""),$(null),V("")},children:"Clear filters"})]})}),e.jsx("div",{className:"text-right",children:e.jsx(_,{variant:"link",asChild:!0,className:"text-primary",children:e.jsxs(fe,{to:`/emails/${encodeURIComponent(a)}`,children:["View All Emails",e.jsx(cs,{className:"h-3.5 w-3.5 ml-1"})]})})}),c?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(je,{className:"h-5 w-5 animate-spin text-muted-foreground"}),e.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:"Loading analyses..."})]}):e.jsxs(N,{children:[e.jsxs(Xe,{children:[e.jsx(Ze,{children:e.jsxs(ae,{children:[e.jsx(P,{children:"Category"}),e.jsx(P,{children:"Summary"}),e.jsx(P,{children:"Urgency"}),e.jsx(P,{children:"Source"}),e.jsx(P,{children:"Confidence"}),e.jsx(P,{children:"Date"})]})}),e.jsxs(Je,{children:[i.map(r=>e.jsxs(ae,{children:[e.jsx(E,{children:e.jsxs(T,{className:ge[r.category]||"bg-dd-200 text-dd-700",children:[r.category,"/",r.sub_category]})}),e.jsx(E,{className:"max-w-xs truncate text-muted-foreground",children:r.summary}),e.jsx(E,{children:e.jsxs("span",{className:`text-xs ${Ns[r.urgency]||"text-muted-foreground"}`,children:[r.urgency.toUpperCase(),r.action_required&&e.jsx(T,{variant:"destructive",className:"ml-1.5 text-[10px] px-1.5 py-0",children:"ACTION"})]})}),e.jsx(E,{className:"text-xs text-muted-foreground",children:r.analysis_source}),e.jsx(E,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-12 h-1.5 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary rounded-full",style:{width:`${Math.round(r.confidence*100)}%`}})}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[Math.round(r.confidence*100),"%"]})]})}),e.jsx(E,{className:"text-xs text-muted-foreground",children:new Date(r.created_at).toLocaleString()})]},r.id)),i.length===0&&e.jsx(ae,{children:e.jsxs(E,{colSpan:6,className:"text-center py-12",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:A?"No analyses match your filters":"No email analyses yet"}),e.jsx("p",{className:"text-xs text-muted-foreground/60 mt-1",children:A?"Try adjusting your filter criteria":"Run a scan to analyze emails for this account"})]})})]})]}),C>y&&e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t",children:[e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Showing ",(j-1)*y+1,"-",Math.min(j*y,C)," of ",C]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>I(r=>Math.max(1,r-1)),disabled:j<=1,children:[e.jsx(ls,{className:"h-4 w-4"}),"Prev"]}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[j," / ",k]}),e.jsxs(_,{variant:"outline",size:"sm",onClick:()=>I(r=>Math.min(k,r+1)),disabled:j>=k,children:["Next",e.jsx(We,{className:"h-4 w-4"})]})]})]})]})]})}function Vs(){const{email:s}=Ue(),[a,i]=n.useState(null),[l,c]=n.useState([]),[d,o]=n.useState([]),[u,x]=n.useState(""),[g,m]=n.useState(""),[h,f]=n.useState(""),[$,R]=n.useState(""),[V,S]=n.useState("active"),[O,j]=n.useState(""),[I,C]=n.useState(""),[b,y]=n.useState([]),[M,A]=n.useState(!1);async function k(){try{const t=await U.get(`/api/dashboard/accounts/${encodeURIComponent(s)}`);i(t.account),c(t.history),m(t.account.customer_name||""),f(t.account.phone||""),R(t.account.notes||""),S(t.account.status||"active"),j(t.account.assigned_admin_id||""),y(t.account.tags||[])}catch(t){x(t instanceof Error?t.message:"Failed to load")}}async function G(){try{const t=await U.get("/api/admin/team");o(t.admins)}catch{}}async function r(){A(!0);try{await U.patch(`/api/dashboard/accounts/${encodeURIComponent(s)}`,{customer_name:g||null,phone:h||null,notes:$||null,status:V,assigned_admin_id:O||null,tags:b}),await k()}catch(t){x(t instanceof Error?t.message:"Failed to save")}finally{A(!1)}}function D(){const t=I.trim();t&&!b.includes(t)&&y([...b,t]),C("")}function F(t){y(b.filter(ee=>ee!==t))}if(n.useEffect(()=>{k(),G()},[s]),u)return e.jsx("div",{className:"p-8",children:e.jsxs(ue,{variant:"destructive",children:[e.jsx(he,{className:"h-4 w-4"}),e.jsx(xe,{children:"Error"}),e.jsx(me,{children:u})]})});if(!a)return e.jsx(bs,{});const Le=te.indexOf(a.stage);return e.jsxs("div",{className:"p-6 lg:p-8 max-w-5xl mx-auto space-y-6",children:[e.jsx(_,{variant:"link",asChild:!0,className:"p-0 h-auto text-primary",children:e.jsxs(fe,{to:"/",children:[e.jsx(Qe,{className:"h-4 w-4"}),"Back to Dashboard"]})}),e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:a.email}),a.customer_name&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:a.customer_name})]}),e.jsx(T,{className:z[a.stage]||"bg-dd-200 text-dd-800",children:a.stage.replace(/_/g," ")})]}),e.jsxs(N,{children:[e.jsx(oe,{className:"pb-2",children:e.jsx(de,{className:"uppercase text-[12px] font-semibold text-muted-foreground tracking-wider",children:"Stage Progression"})}),e.jsx(w,{children:e.jsx("div",{className:"flex items-center gap-1.5",children:te.map((t,ee)=>{const le=t===a.stage,ie=ee<=Le,ce=Ke[t]||{active:"bg-dd-300",bar:"bg-dd-200"};return e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:`h-2 rounded-full transition-all ${ie?ce.bar:"bg-muted"} ${le?`${ce.active} ring-2 ring-offset-1 ring-primary`:""}`}),e.jsx("div",{className:`text-[10px] mt-1.5 text-center leading-tight ${le?"font-bold text-foreground":ie?"font-medium text-muted-foreground":"text-muted-foreground/50"}`,children:t.replace(/_/g," ")})]},t)})})})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{label:"Current Stage",value:a.stage.replace(/_/g," "),badge:z[a.stage]},{label:"Status",value:a.status.charAt(0).toUpperCase()+a.status.slice(1),badge:Ye[a.status]},{label:"Last Scanned",value:a.last_scanned_at?new Date(a.last_scanned_at).toLocaleString():"Never"},{label:"Created",value:a.created_at?new Date(a.created_at).toLocaleString():"--"}].map(t=>e.jsx(N,{children:e.jsxs(w,{className:"p-4",children:[e.jsx("p",{className:"uppercase text-[11px] font-semibold text-muted-foreground tracking-wider",children:t.label}),t.badge?e.jsx(T,{className:`mt-2 ${t.badge}`,children:t.value}):e.jsx("p",{className:"text-sm font-medium mt-2",children:t.value})]})},t.label))}),a.scan_error&&e.jsxs(ue,{variant:"destructive",children:[e.jsx(he,{className:"h-4 w-4"}),e.jsx(xe,{children:"Last Scan Error"}),e.jsx(me,{children:a.scan_error})]}),e.jsxs(vs,{defaultValue:"info",children:[e.jsxs(ke,{children:[e.jsxs(q,{value:"info",className:"gap-2",children:[e.jsx(es,{className:"h-4 w-4"}),"Account Info"]}),e.jsxs(q,{value:"history",className:"gap-2",children:[e.jsx(ss,{className:"h-4 w-4"}),"Stage History"]}),e.jsxs(q,{value:"analysis",className:"gap-2",children:[e.jsx(qe,{className:"h-4 w-4"}),"Email Analysis"]})]}),e.jsx(H,{value:"info",children:e.jsxs(N,{children:[e.jsx(oe,{children:e.jsx(de,{className:"uppercase text-[12px] font-semibold text-muted-foreground tracking-wider",children:"Account Details"})}),e.jsxs(w,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{children:"Customer Name"}),e.jsx(B,{value:g,onChange:t=>m(t.target.value),placeholder:"Enter customer name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{children:"Phone"}),e.jsx(B,{value:h,onChange:t=>f(t.target.value),placeholder:"Enter phone number"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{children:"Status"}),e.jsxs(W,{value:V,onValueChange:S,children:[e.jsx(K,{children:e.jsx(Y,{})}),e.jsxs(X,{children:[e.jsx(p,{value:"active",children:"Active"}),e.jsx(p,{value:"suspended",children:"Suspended"}),e.jsx(p,{value:"archived",children:"Archived"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{children:"Assigned Admin"}),e.jsxs(W,{value:O||"unassigned",onValueChange:t=>j(t==="unassigned"?"":t),children:[e.jsx(K,{children:e.jsx(Y,{})}),e.jsxs(X,{children:[e.jsx(p,{value:"unassigned",children:"Unassigned"}),d.map(t=>e.jsx(p,{value:t.id,children:t.display_name||t.username},t.id))]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{children:"Tags"}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-1",children:[b.map(t=>e.jsxs(T,{variant:"secondary",className:"gap-1.5",children:[t,e.jsx("button",{onClick:()=>F(t),children:e.jsx(He,{className:"h-3 w-3 hover:text-destructive transition-colors"})})]},t)),b.length===0&&e.jsx("span",{className:"text-xs text-muted-foreground",children:"No tags added"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(B,{value:I,onChange:t=>C(t.target.value),onKeyDown:t=>t.key==="Enter"&&(t.preventDefault(),D()),placeholder:"Add a tag...",className:"w-auto"}),e.jsx(_,{variant:"outline",onClick:D,children:"Add"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(L,{children:"Notes"}),e.jsx(De,{value:$,onChange:t=>R(t.target.value),rows:3,placeholder:"Add notes about this account..."})]}),e.jsx("div",{className:"flex items-center gap-3 pt-2",children:e.jsxs(_,{onClick:r,disabled:M,children:[M&&e.jsx(je,{className:"h-4 w-4 animate-spin"}),M?"Saving...":"Save Changes"]})})]})]})}),e.jsx(H,{value:"history",children:l.length===0?e.jsx(N,{children:e.jsxs(w,{className:"py-12 text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"No stage changes recorded"}),e.jsx("p",{className:"text-xs text-muted-foreground/60 mt-1",children:"Changes will appear here as the account progresses"})]})}):e.jsx("div",{className:"pl-2 pt-2",children:l.map(t=>e.jsx(ys,{entry:t},t.id))})}),e.jsx(H,{value:"analysis",children:e.jsx(ws,{accountId:a.id,email:a.email})})]})]})}export{Vs as default};
